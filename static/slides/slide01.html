<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Rの基本的な操作</title>
<meta name="author" content="村田 昇"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/oer-reveal.css" id="theme"/>

<link rel="stylesheet" href="./reveal.js/plugin/toc-progress/toc-progress.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/toc-style.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/fonts/source-sans-pro/source-sans-pro.css"/>

<link rel="stylesheet" href="./reveal.js/plugin/accessibility/helper.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/mycourse.css"/>
<link rel="stylesheet" href="./reveal.js/plugin/highlight/zenburn.css"/>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide" data-state="no-toc-progress">
<!-- This is an HTML template for the title slide. -->
<!-- Embed logos as necessary. -->
<!-- <a class="nooutlink" href="url"><img class="state-background your-logo-class" src="whatever.png" alt="Whatever" /></a> -->
<div class="talk-title">
    <h1 class="no-toc-progress">Rの基本的な操作</h1>
</div>
<div class="talk-subtitle">
    <p>第1講 - R言語の仕様とRStudioの使い方</p>
</div>
<div class="keyboard-usage">
    <p>(Press <code>?</code> for help, <code>n</code> and <code>p</code> for next and previous slide)</p>
</div>
<div class="talk-author">
  <p>村田 昇<br />
  </p>
</div>

</section>
<section>
<section id="slide-orge0afabc">
<h2 id="orge0afabc">講義概要</h2>
<ul>
<li>R言語の概要</li>
<li>RStudio の UI (ユーザインタフェース)</li>
<li>R言語の使い方</li>
<li>Rで用いるデータ構造 (ベクトル・データフレーム)</li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org200108a">
<h2 id="org200108a">R言語の概要</h2>
<div class="outline-text-2" id="text-org200108a">
</div>
</section>
<section id="slide-orgd453860">
<h3 id="orgd453860">R言語とは</h3>
<ul>
<li>統計計算のための言語と環境の総称</li>
<li>オープンソース・フリーソフトウェア</li>
<li><b>パッケージ</b> を利用して容易に機能拡張が可能
<ul>
<li>パッケージの開発は非常に活発 (現在10000を越える)</li>
<li>最新の技術や方法が簡単に導入できることも多い</li>

</ul></li>
<li><a href="https://www.r-project.org/">https://www.r-project.org/</a> (プロジェクトのサイト)</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org1af6d8a">
<h3 id="org1af6d8a">RStudioとは</h3>
<ul>
<li>Posit Software が開発している統合開発環境 (IDE)
<ul>
<li>R によるデータ解析や統計計算・パッケージ開発を支援</li>
<li>OSにほとんど依存しない対話型操作環境を提供</li>

</ul></li>
<li>本講義ではRStudioを用いて説明を行う</li>
<li><a href="https://posit.co/">https://posit.co/</a> (Posit Software のサイト)</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org711e072">
<h3 id="org711e072">Rの得意分野</h3>
<ul>
<li><b>データの分類・集計・整理</b>
<ul>
<li>記述統計量 (基本・要約統計量) の計算</li>
<li>グラフによる視覚化</li>
<li>さまざまな統計分析 (多変量解析を含む)</li>

</ul></li>
<li>プログラムによる <b>処理の自動化</b></li>
<li><b>確率的シミュレーション</b> (モンテカルロ法)
<ul>
<li>擬似乱数による不確定性を含む現象の模擬</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org5edd280">
<h3 id="org5edd280">データ形式の分類</h3>
<ul>
<li>構造化データ
<ul>
<li>個々のデータが項目ごとに表形式で整理されている</li>
<li>集計・分類・抽出・追加など整理が比較的容易</li>
<li><span style="color:green;">国別の経済指標，学生の成績表</span></li>

</ul></li>

<li>非構造化データ (本講義では扱わない)
<ul>
<li>データごとに形式や項目数など属性が異なる</li>
<li>データの整理や比較がそのままでは困難</li>
<li><span style="color:green;">文書，画像，動画，音声</span></li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org545abe4">
<h3 id="org545abe4">参考 : R言語のオンラインコース</h3>
<ul>
<li>RStudio の初心者向ガイド <br />
<a href="https://education.rstudio.com/learn/beginner/">https://education.rstudio.com/learn/beginner/</a></li>
<li>posit Cloud の自習コース <br />
<a href="https://posit.cloud/learn/recipes/">https://posit.cloud/learn/recipes/</a></li>
<li>Data Camp のR入門コース <br />
<a href="https://onboarding.datacamp.com/">https://onboarding.datacamp.com/</a></li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org1118bc9">
<h2 id="org1118bc9">RStudio の UI</h2>
<div class="outline-text-2" id="text-org1118bc9">
</div>
</section>
<section id="slide-orge905fee">
<h3 id="orge905fee">起動画面</h3>
<ul>
<li>以下 <b>RStudio</b> を用いて説明する</li>
<li>複数の <b>タブ</b> (tab; つまみ) を含む4つの <b>ペイン</b> (pane; 枠) が立ち上がる
<ul>
<li>左上 : エディタ・表など (開いていない場合もある)</li>
<li>左下 : コンソール・ターミナルなど</li>
<li>右上 : 作業環境内の変数・コマンド履歴など</li>
<li>右下 : パッケージ・グラフィックス・ヘルプなど</li>

</ul></li>
<li>ペインの配置や数は個別に設定することが可能
<ul>
<li>メニュー : <b>Tools &gt; Global Options</b> で設定</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org687a8b8">
<h3 id="org687a8b8">コンソール (左下ペイン)</h3>
<ul>
<li>R言語で記述されたコマンドを入力
<ul>
<li><p>
例えば以下のような計算を行うことができる
</p>
<div class="org-src-container">

<pre><code class="R" >#' 一般的な数式を入力すれば計算機として使える
#' "#" 以降はコメントとして無視される
1 + 2 + 3 + 4 # 空白は無視される
sin(pi/3) / cos(pi/3) # tan(pi/3) になるはず
</code></pre>
</div></li>
<li><p>
コンソール上で終了を指示する以下のコマンドを入力すれば
R を終了させることができる
</p>
<div class="org-src-container">

<pre><code class="R" >#' R の終了には q() または quit() を用いる
q()
</code></pre>
</div>
<ul>
<li>メニューの <b>Quit RStudio</b> も利用可能</li>
<li>終了できない場合はOSの機能で強制終了する必要がある</li>

</ul></li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org757c5af">
<h3 id="org757c5af">エディタ (左上ペイン)</h3>
<ul>
<li>コマンドを記述したファイルを操作</li>
<li>一連のコマンドをまとめたり修正しながら実行
<ul>
<li>コンソールに入力したコマンドは直ちに実行されてしまう</li>
<li>コマンドを実行順に記述したファイル <b>R Script</b> を作成</li>
<li>ファイル(の一部)を実行</li>
<li>ファイルを保存</li>

</ul></li>
<li><p>
同一ファイル内でプログラムと文書の記述も可能
</p>
<ul>
<li>R Markdown</li>
<li>Quarto</li>

</ul>
<p>
(本講義では扱わない)
</p></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org25d859b">
<h3 id="org25d859b">ヘルプ (右下ペイン)</h3>
<ul>
<li>各関数の詳細を記述したヘルプが参照可能
<ul>
<li>機能，引数名，引数の既定値，実行例など</li>

</ul></li>
<li>右下ペイン <b>Help</b> タブ右上の検索窓から探索</li>
<li>ヘルプ内の検索はその下の <b>Find in Topic</b> で可能</li>
<li>コンソール内では関数 <code>help()</code> や <code>?</code> などを利用</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orga095750">
<h3 id="orga095750">パッケージ (右下ペイン)</h3>
<ul>
<li>パッケージを用いて機能を拡張</li>
<li>RStudio でのインストール手順
<ul>
<li>右下ペイン <b>Package</b> タブをクリック</li>
<li>左上の <b>Install</b> をクリック</li>
<li>パッケージ名を入力し <b>Install</b> をクリック</li>

</ul></li>
<li>利用可能なパッケージの情報は
右下ペイン <b>Package</b> タブで確認できる</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgecacd2d">
<h3 id="orgecacd2d">作業ディレクトリ</h3>
<ul>
<li>プログラムが実行されるディレクトリ(フォルダ)</li>
<li>作業ディレクトリにあるファイルの読み書きはパスを指定する必要がない</li>
<li>現在の作業ディレクトリは <b>Console</b> タブで確認</li>
<li>メニュー : <b>Session &gt; Set Working Directory</b> で指定
<ul>
<li>読み込んだファイルの場所を選択</li>
<li><b>Files</b> タブ (右下ペイン) の場所を選択 (<b>More</b> からも選択可)</li>
<li>ディレクトリを直接選択</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org47c65c3">
<h3 id="org47c65c3">プロジェクト</h3>
<ul>
<li>作業環境をまとめて設定・保存する機能
<ul>
<li>作成したプロジェクトは <b>Project</b> ボタン(右上)から選択可能</li>
<li>いつでもプロジェクトを中断可能</li>
<li>プロジェクト毎に履歴や変数を保存可能</li>
<li>複数のプロジェクトを定義可能</li>

</ul></li>
<li>一般的なプロジェクトの作成手順
<ul>
<li><b>Project</b> ボタンから <b>New Project</b> を選択</li>
<li><b>Create Project</b> ダイアログで <b>New Directory</b> を選択
<ul>
<li>既にあるディレクトリを用いる場合は <b>Existing Directory</b></li>
<li>Github などを利用する場合は <b>Version Control</b></li>

</ul></li>
<li><b>Project Type</b> ダイアログで <b>New Project</b> を選択</li>
<li><b>Directory Name</b> とその親ディレクトリを指定</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org18fc982">
<h3 id="org18fc982">終了時の注意</h3>
<ul>
<li><p>
終了時にコンソールに以下のメッセージが表示される場合がある
</p>
<div class="org-src-container">

<pre><code class="R" >&gt; q()
Save workspace image? [y/n/c]:     
</code></pre>
</div></li>
<li>作業で使った変数などをセーブするか尋ねている
<ul>
<li><code>y</code> を入力: セーブする (yesの略)</li>
<li><code>n</code> を入力: セーブしない (noの略)</li>
<li><code>c</code> を入力: Rの終了をキャンセルする (cancelの略)</li>

</ul></li>
<li>セーブした場合次回起動時に読み込まれる</li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org02dcc22">
<h2 id="org02dcc22">基本的な使い方</h2>
<div class="outline-text-2" id="text-org02dcc22">
</div>
</section>
<section id="slide-org364d2c7">
<h3 id="org364d2c7">計算をする</h3>
<ul>
<li>四則演算や数学関数は直感的な文法で計算可能</li>

</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> 基本的な演算と関数</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">加減乗除</td>
<td class="org-left"><code>+, -, *, /</code></td>
</tr>

<tr>
<td class="org-left">羃乗</td>
<td class="org-left"><code>^</code> または <code>**</code></td>
</tr>

<tr>
<td class="org-left">三角関数</td>
<td class="org-left"><code>sin(), cos(), tan()</code></td>
</tr>

<tr>
<td class="org-left">逆三角関数</td>
<td class="org-left"><code>asin(), acos(), atan()</code></td>
</tr>

<tr>
<td class="org-left">指数関数</td>
<td class="org-left"><code>exp()</code></td>
</tr>

<tr>
<td class="org-left">対数関数</td>
<td class="org-left"><code>log(), log10(), log2()</code></td>
</tr>

<tr>
<td class="org-left">双曲線関数</td>
<td class="org-left"><code>sinh(), cosh(), tanh()</code></td>
</tr>

<tr>
<td class="org-left">平方根</td>
<td class="org-left"><code>sqrt()</code></td>
</tr>

<tr>
<td class="org-left">絶対値</td>
<td class="org-left"><code>abs()</code></td>
</tr>
</tbody>
</table>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgb026dab">
<h3 id="orgb026dab">電卓として使う</h3>
<ul>
<li><p>
<span style="color:green;">コンソール上での計算例</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 与えられた式の計算をコンソール上で実行してみよう
#' 1 x 2 + 3^2 の計算
1 * 2 + 3^2
#' sin(2π) の計算
sin(2*pi)
#' √2 + |-0.6| の計算
sqrt(2) + abs(-0.6)
</code></pre>
</div>

<pre class="example">
[1] 11
[1] -2.449294e-16
[1] 2.014214
</pre></li>

<li>入力内容は右上の <b>History</b> タブで確認可能</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org6b39639">
<h3 id="org6b39639">エディタから実行する</h3>
<ul>
<li>新規ファイルの作成 (以下のいずれか)
<ul>
<li>左上の <b>+</b> から
<b>R Script</b> を選択</li>
<li><b>File</b> から
<b>New File</b> を選択，
更に <b>R Script</b> を選択</li>

</ul></li>
<li>エディタ上でコマンドを記述</li>
<li>実行範囲の選択
<ul>
<li>一行のみ: カーソルをその行に移動</li>
<li>複数行: クリックしてながら移動して選択する</li>

</ul></li>
<li>選択範囲の実行 (以下のいずれか)
<ul>
<li>左上の <b>Run</b> をクリック</li>
<li><b>Code</b> から 
<b>Selected Line(s)</b> を選択
(Ctrl/Command+Enter)</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgbb446d8">
<h3 id="orgbb446d8">R Script ファイルを保存する</h3>
<ul>
<li>以下のいずれかで保存することができる
<ul>
<li>左上のディスクのマークをクリック</li>
<li><b>File</b> から 
<b>Save</b> を選択 (Ctrl/Command+S)</li>

</ul></li>
<li>ファイル作成に関する注意
<ul>
<li>保存する時にファイル名の入力が求められる</li>
<li>拡張子は通常
<b>.R</b> または
<b>.r</b> を利用する</li>
<li><b>#</b> 以降の文字列は実行されないのでコメントとして有用</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-orgadf29ca" data-background="#fef4f4">
<h2 id="orgadf29ca">実習</h2>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgeb33a4b" data-background="#fef4f4">
<h3 id="orgeb33a4b">練習問題</h3>
<p>
基本的な操作に慣れよう
</p>
<ul>
<li>以下の計算を行う R Script を作成し保存しなさい
<ul>
<li>\(123\times456-789\)</li>
<li>\((2^{2^5}+1)\div641\)</li>
<li>\(\sin^2(\pi/3)+\cos^2(\pi/3)\)</li>
<li>適当な数学関数を用いた計算</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org84996c0">
<h2 id="org84996c0">より進んだ使い方</h2>
<div class="outline-text-2" id="text-org84996c0">
</div>
</section>
<section id="slide-org5e2256c">
<h3 id="org5e2256c">関数</h3>
<ul>
<li>関数の取り扱いは一般的な計算機言語とほぼ同様
<ul>
<li>関数は引数とその値を指定して実行(引数がない場合もある)</li>
<li>引数名は順序を守れば省略可能</li>

</ul></li>
<li><p>
関数の呼び出し方 (関数名を <code>f</code> とする)
</p>
<div class="org-src-container">

<pre><code class="R" >f(arg1 = value1, arg2 = value2) # 擬似コード
#' arg1, arg2 は引数の名前，value1, value2 は引数に渡す値を表す
f(value1, value2) # 上と同値．順序に注意
</code></pre>
</div>
<ul>
<li><b>擬似コード</b> = 実行しても動かないコード</li>

</ul></li>
<li>実装されている関数の使い方は <code>help(関数名)</code> または <code>?関数名</code> で
ヘルプが表示される</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org1fd1a88">
<h3 id="org1fd1a88">関数の実行例</h3>
<ul>
<li><p>
<span style="color:green;">正弦関数の計算</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 正弦関数(引数が1つ)の計算例
sin(x = pi/2) 
sin(pi/2) # 引数名は省略でき，前の行とこの行は同じ結果になる
</code></pre>
</div></li>
<li><p>
<span style="color:green;">対数関数の計算</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 対数関数(引数が2つ)の計算例
#' 以下は擬似コード．a, b を適当な数値に置き換えて実行しなさい
log(a, b) # 底を b とする a の対数 
log(x = a, base = b) #上と同値
log(base = b, x = a) #上と同値(引数名があれば順序は自由に変えられる)
log(b, a) # = log(x=b,base=a) (引数名がなければ規定の順序で解釈される)
log(a) # 自然対数 =log(a,base=exp(1))
</code></pre>
</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgd8c86a5">
<h3 id="orgd8c86a5">ヘルプ機能</h3>
<ul>
<li>各関数の詳細を記述したヘルプが用意されている
<ul>
<li>Description (機能の概要)</li>
<li>Usage (関数の呼び出し方)</li>
<li>Arguments (関数の引数)</li>
<li>Value (関数の返り値)</li>
<li>Examples (実行例)</li>

</ul></li>
<li>ヘルプに関連する関数
<ul>
<li><code>help()</code> (使い方や例の表示)</li>
<li><code>example()</code> (例を実際に実行してくれる)</li>
<li><code>help.search()</code> (キーワード検索)</li>

</ul></li>
<li>右下ペイン <b>Help</b> タブの利用
<ul>
<li>右上にある検索窓でヘルプを参照可能</li>
<li>左上にある検索窓はヘルプ内を検索可能</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgb4a9934">
<h3 id="orgb4a9934">ヘルプ機能の利用例</h3>
<ul>
<li><p>
<span style="color:green;">ヘルプの使い方</span> 
</p>
<div class="org-src-container">

<pre><code class="R" >#' 関数 log() に関するヘルプの例
help(log) # Helpタブに結果は表示される
?log # 上と同値
example(log) # ヘルプ内の例を実行
help.search("log") # "log"に関連する項目は？
??"log" # 上と同値
</code></pre>
</div>
<ul>
<li>右下ペインの <b>Help</b> タブに表示される</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org4b73bb6">
<h3 id="org4b73bb6">オブジェクト</h3>
<ul>
<li>Rで扱う対象を総称して <b>オブジェクト</b> と呼ぶ
<ul>
<li>Rで扱うことのできる数値
<ul>
<li>実数および複素数 (指数表記にも対応)</li>
<li>無限大や不定な数など特殊なものにも対応</li>

</ul></li>
<li>一続きの文字 (文字列)</li>
<li>計算手続きをまとめたもの (関数)</li>

</ul></li>
<li>オブジェクトには名前を付けることができる</li>
<li>オブジェクトの情報は右上ペインの
<b>Environment</b> タブで確認できる</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org2e6107c">
<h3 id="org2e6107c">オブジェクトの代入の例</h3>
<ul>
<li><p>
<span style="color:green;">代入操作の例</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 数値を変数 foo に代入する
(foo &lt;- 3) # foo &lt;- 3; print(foo) と等価
#' 変数 foo を用いて計算し，結果を bar に代入する
bar &lt;- sin(2/3*pi) + cos(foo * pi/4) # 計算結果は表示されない
#' 変数 bar の内容を表示する
print(bar)
</code></pre>
</div>

<pre class="example">
[1] 3
[1] 0.1589186
</pre>


<ul>
<li>計算結果や良く使う文字列の保存に利用できる</li>
<li>変数名は自由に決められるが，
予約語 <code>c, q, t, C, D, F, I, T</code> には注意が必要</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org30d788e">
<h3 id="org30d788e">パッケージの操作</h3>
<ul>
<li>機能を拡張する多数のパッケージが存在</li>
<li>利用可能なパッケージは右下ペインの
<b>Package</b> タブに表示される</li>
<li>パッケージのインストール方法
<ul>
<li>RStudioの機能を利用する方法
<ul>
<li><b>Package</b> タブをクリック</li>
<li>左上の <b>Install</b> をクリック</li>
<li>パッケージ名を入力し <b>Install</b> をクリック</li>

</ul></li>
<li>コンソールから行う方法
<ul>
<li>関数 <code>install.packages()</code> を利用</li>

</ul></li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-orgfd1a9ab" data-background="#fef4f4">
<h2 id="orgfd1a9ab">実習</h2>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org623809d" data-background="#fef4f4">
<h3 id="org623809d">練習問題</h3>
<ul>
<li>パッケージを導入して
含まれている関数について調べてみよう
<ul>
<li>package &rsquo;e1071&rsquo; をインストールする</li>
<li>関数 kurtosis を調べる</li>
<li>関数 kurtosis を呼び出す</li>

</ul></li>
<li>パッケージ群を導入してみよう
<ul>
<li>package &rsquo;tidyverse&rsquo; をインストールする</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org246b5e0">
<h2 id="org246b5e0">Rで用いるデータ構造</h2>
<div class="outline-text-2" id="text-org246b5e0">
</div>
</section>
<section id="slide-org22109de">
<h3 id="org22109de">データ型</h3>
<ul>
<li>Rではさまざまな数値を扱うことができる
<ul>
<li>実数および複素数 (指数表記にも対応)</li>
<li>無限大や不定な数など特殊なものにも対応</li>

</ul></li>

</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> 代表的なデータ型</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">型の名称</th>
<th scope="col" class="org-left">役割</th>
<th scope="col" class="org-left">例</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>numeric</code></td>
<td class="org-left">(広義の)実数を表す</td>
<td class="org-left"><code>1, pi, NaN</code></td>
</tr>

<tr>
<td class="org-left"><code>complex</code></td>
<td class="org-left">複素数を表す</td>
<td class="org-left"><code>1i, 3-4i</code></td>
</tr>

<tr>
<td class="org-left"><code>character</code></td>
<td class="org-left">文字列を表す</td>
<td class="org-left"><code>"foo", "Hello World!"</code></td>
</tr>

<tr>
<td class="org-left"><code>logical</code></td>
<td class="org-left">論理値(真偽)を表す</td>
<td class="org-left"><code>TRUE, FALSE, 3&lt;4, NA</code></td>
</tr>
</tbody>
</table>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgfb9ec86">
<h3 id="orgfb9ec86">データ構造</h3>
<ul>
<li>Rではさまざまなデータの集合を扱うことができる</li>

</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 3:</span> 代表的なデータ構造</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">構造の名称</th>
<th scope="col" class="org-left">役割</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>vector</code></td>
<td class="org-left">1次元配列 (ベクトル)</td>
</tr>

<tr>
<td class="org-left"><code>matrix</code></td>
<td class="org-left">2次元配列 (行列)</td>
</tr>

<tr>
<td class="org-left"><code>array</code></td>
<td class="org-left">多次元配列</td>
</tr>

<tr>
<td class="org-left"><code>data.frame</code> (<code>tibble</code>)</td>
<td class="org-left">表形式のデータ集合</td>
</tr>

<tr>
<td class="org-left"><code>list</code></td>
<td class="org-left">異なるデータ集合の集合</td>
</tr>
</tbody>
</table>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org4a52809">
<h3 id="org4a52809">ベクトルとは</h3>
<ul>
<li>同じデータ型の値 (スカラー値) の集合</li>
<li>Rオブジェクトの多くはベクトルとして扱われる</li>
<li>スカラーは長さ1のベクトルとして扱われる</li>
<li><p>
<span style="color:green;">ベクトルの例</span>
</p>
<blockquote>
<p>
数値 (実数や複素数)
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-right">10.8</td>
<td class="org-right">11.6</td>
<td class="org-right">13.0</td>
<td class="org-right">11.4</td>
<td class="org-left">&#x2026;</td>
</tr>
</tbody>
</table>
<p>
文字列 (&rsquo; や &ldquo; で囲まれた文字．&rdquo;foo&ldquo;，&rdquo;bar&ldquo;など)
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&ldquo;this&rdquo;</td>
<td class="org-left">&ldquo;that&rdquo;</td>
<td class="org-left">&ldquo;apple&rdquo;</td>
<td class="org-left">&ldquo;orange&rdquo;</td>
<td class="org-left">&#x2026;</td>
</tr>
</tbody>
</table>
<p>
論理値 ( <code>TRUE</code> , <code>FALSE</code> )
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left"><code>TRUE</code></td>
<td class="org-left"><code>TRUE</code></td>
<td class="org-left"><code>FALSE</code></td>
<td class="org-left"><code>TRUE</code></td>
<td class="org-left">&#x2026;</td>
</tr>
</tbody>
</table>
</blockquote></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org9d74dc3">
<h3 id="org9d74dc3">ベクトルの作成</h3>
<ul>
<li>作成方法はいくつか用意されている
<ul>
<li>関数 <code>c()</code> を用いて作成する</li>
<li>演算子 <code>:</code> や関数 <code>seq()</code> を利用する (等差数列)</li>
<li>関数 <code>rep()</code> を利用する (数列を繰り返す)</li>

</ul></li>
<li><p>
<span style="color:green;">ベクトルの作成の例</span>
</p>
<div class="org-src-container">

<pre><code class="R" >x &lt;- c(1,-2,3,-4) # 数値のベクトル
y &lt;- c("Alice","Bob","Cathy","David") # 文字列のベクトル
z &lt;- c(TRUE,FALSE,TRUE,FALSE) # 論理値のベクトル
1:5 # c(1,2,3,4,5) と同じ．seq(1,5,by=1) としても良い
rep(1:2, times=3) # c(1,2,1,2,1,2) と同じ
rep(1:2, each=3)  # c(1,1,1,2,2,2) と同じ
</code></pre>
</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgc228912">
<h3 id="orgc228912">ベクトルの要素の選択</h3>
<ul>
<li>演算子 <code>[]</code> を用いて指定する
<ul>
<li>単一の要素を選択する</li>
<li>複数の要素をベクトルを用いて選択することもできる</li>

</ul></li>
<li><p>
<span style="color:green;">要素の選択の例</span>
</p>
<div class="org-src-container">

<pre><code class="R" >x[2] # xの第2要素 (ベクトルの添え字は1から始まる)
y[c(1,3,4)] # 複数の要素 = c(y[1],y[3],y[4])
</code></pre>
</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org7daf84e">
<h3 id="org7daf84e">データフレーム</h3>
<ul>
<li>複数の個体について，いくつかの属性を集計した表
<ul>
<li>長さの等しい列ベクトルをまとめたもの</li>
<li>各列のデータ型はバラバラでも良い</li>

</ul></li>
<li>実データの最も一般的な形式</li>
<li><p>
<span style="color:green;">データフレームの例</span>
</p>
<blockquote>
<p>
ある小学校の1年生の身長・体重・性別・血液型のデータ
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">名前</th>
<th scope="col" class="org-right">身長 [cm]</th>
<th scope="col" class="org-right">体重 [kg]</th>
<th scope="col" class="org-left">性別</th>
<th scope="col" class="org-left">血液型</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">太郎</td>
<td class="org-right">108</td>
<td class="org-right">19</td>
<td class="org-left">男</td>
<td class="org-left">B</td>
</tr>

<tr>
<td class="org-left">花子</td>
<td class="org-right">116</td>
<td class="org-right">21</td>
<td class="org-left">女</td>
<td class="org-left">O</td>
</tr>

<tr>
<td class="org-left">次郎</td>
<td class="org-right">130</td>
<td class="org-right">25</td>
<td class="org-left">男</td>
<td class="org-left">AB</td>
</tr>

<tr>
<td class="org-left">&#x2026;</td>
<td class="org-right">&#x2026;</td>
<td class="org-right">&#x2026;</td>
<td class="org-left">&#x2026;</td>
<td class="org-left">&#x2026;</td>
</tr>
</tbody>
</table>
</blockquote></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org6c44c73">
<h3 id="org6c44c73">&ldquo;base R&rdquo; vs &ldquo;tidyverse&rdquo;</h3>
<ul>
<li>データ操作とグラフィクスの枠組
<ul>
<li><b>base R</b> : R の標準環境</li>
<li><b>tidyverse</b> : Hadley Wickham @posit による拡張パッケージ集
<ul>
<li><a href="https://www.tidyverse.org/packages/">https://www.tidyverse.org/packages/</a></li>
<li><a href="https://tidyverse.tidyverse.org/">https://tidyverse.tidyverse.org/</a></li>

</ul></li>

</ul></li>
<li>本講義では tidyverse を中心に説明</li>
<li><p>
パッケージ集の利用には以下が必要
</p>
<div class="org-src-container">

<pre><code class="R" >#' 最初に一度だけ以下のいずれかを実行しておく
#'  - Package タブから tidyverse をインストール
#'  - コンソール上で次のコマンドを実行 'install.packages("tidyverse")'
#' tidyverse パッケージの読み込み
library(tidyverse)
</code></pre>
</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org526612a">
<h3 id="org526612a">データフレームの作成</h3>
<ul>
<li>作成方法はいくつか用意されている
<ul>
<li>同じ長さのベクトルを並べる(関数 <code>tibble::tibble()</code>)</li>
<li>データフレームを結合する(関数 <code>dplyr::bind_cols()</code>)</li>
<li>マトリクスを変換する (全て同じ型の場合)</li>
<li>ファイルを読み込む (CSV形式を主に扱う)</li>

</ul></li>
<li><p>
<span style="color:green;">データフレームの作成の例</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 同じ長さのベクトル(関数 base::c() で作成)を並べる (関数 tibble::tibble())
#' (... &lt;- ...) は代入した結果を表示
(foo &lt;- tibble(one = c(1,2,3), two = c("AB","CD","EF"))) 
(bar &lt;- tibble(three = c("x","y","z"), four = c(0.9,0.5,-0.3)))
#' データフレームを結合する (関数 dplyr::bind_cols())
(baz &lt;- bind_cols(foo, bar)) # bind columns
</code></pre>
</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org275f0da">
<h3 id="org275f0da">データフレームの要素の選択</h3>
<ul>
<li>選択方法はいくつか用意されている
<ul>
<li>添字の番号を指定する (マイナスは除外)</li>
<li>論理値 (TRUE/FALSE) で指定する</li>
<li>要素の名前で指定する</li>

</ul></li>
<li><p>
<span style="color:green;">要素の選択の例</span>
</p>
<div class="org-src-container">

<pre><code class="R" >z &lt;- tibble(one = c(1,2,3),
            two = c("AB","CD","EF"),
            three = 6:8)
z[1,2] # 1行2列の要素を選択
z[-c(1,3),] # 1,3行を除外
z[c(TRUE,FALSE,TRUE),] # 1,3行を選択
z[,"two"] # 列名"two"を選択(1列のデータフレームになる)
z["two"]  # 上記と同様の結果
z[,c("one","three")] # 列名"one"と"three"を選択(データフレームになる)
z[c("one","three")]  # 上記と同様の結果
z[["two"]] # 列名"two"のベクトルを選択(1列の場合しか使えない)
z$two      # 上記と同様の結果
</code></pre>
</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-orgbdd4ce3" data-background="#fef4f4">
<h2 id="orgbdd4ce3">実習</h2>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgba606f4" data-background="#fef4f4">
<h3 id="orgba606f4">練習問題</h3>
<ul>
<li><p>
次の表に対応するデータフレームを作成しなさい
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">name</th>
<th scope="col" class="org-right">math</th>
<th scope="col" class="org-right">phys</th>
<th scope="col" class="org-right">chem</th>
<th scope="col" class="org-right">bio</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Alice</td>
<td class="org-right">90</td>
<td class="org-right">25</td>
<td class="org-right">65</td>
<td class="org-right">70</td>
</tr>

<tr>
<td class="org-left">Bob</td>
<td class="org-right">80</td>
<td class="org-right">50</td>
<td class="org-right">100</td>
<td class="org-right">50</td>
</tr>

<tr>
<td class="org-left">Carol</td>
<td class="org-right">70</td>
<td class="org-right">75</td>
<td class="org-right">70</td>
<td class="org-right">30</td>
</tr>

<tr>
<td class="org-left">Dave</td>
<td class="org-right">60</td>
<td class="org-right">100</td>
<td class="org-right">40</td>
<td class="org-right">80</td>
</tr>

<tr>
<td class="org-left">Eve</td>
<td class="org-right">50</td>
<td class="org-right">80</td>
<td class="org-right">75</td>
<td class="org-right">100</td>
</tr>
</tbody>
</table></li>
<li>データフレームの要素の選択を試みなさい</li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org6bae328">
<h2 id="org6bae328">次回の予定</h2>
<ul>
<li>R言語のデータ構造</li>
<li>ベクトル・行列・リストの操作</li>
<li>ベクトルと行列のさまざまな計算</li>

</ul>
<div class="slide-footer"><br></div>
</div>
</div>
<script src="./reveal.js/dist/reveal.js"></script>
<script src="./reveal.js/plugin/notes/notes.js"></script>
<script src="./reveal.js/plugin/search/search.js"></script>
<script src="./reveal.js/plugin/zoom/zoom.js"></script>
<script src="./reveal.js/plugin/highlight/highlight.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
mouseWheel: false,
fragmentInURL: true,
hashOneBasedIndex: false,
pdfSeparateFragments: false,
overview: true,

transition: 'fade',
transitionSpeed: 'default',
spotlight: { size: 90, initialPresentationMode: false }, chalkboard: { toggleChalkboardButton: { left: '80px' }, toggleNotesButton: { left: '130px'}}, keyboard: { 69: function() { RevealChalkboard.toggleNotesCanvas() }, 87: function() { RevealChalkboard.toggleChalkboard() }, 67: function() { RevealChalkboard.clear() }, 82: function() { RevealChalkboard.reset() }, 68: function() { RevealChalkboard.download() }, 88: function() { RevealChalkboard.colorNext() }, 89: function() { RevealChalkboard.colorPrev() }, 84: function() { RevealSpotlight.toggleSpotlight() }, 81: function() { RevealSpotlight.togglePresentationMode()}},

// Plugins with reveal.js 4.x
plugins: [ RevealNotes, RevealSearch, RevealZoom, RevealHighlight ],

// Optional libraries used to extend reveal.js
dependencies: [
{ src: './reveal.js/plugin/menu/menu.js'},
{ src: './reveal.js/plugin/chalkboard/chalkboard.js'},
{ src: './reveal.js/plugin/spotlight/spotlight.js'}]

});
</script>
</body>
</html>
